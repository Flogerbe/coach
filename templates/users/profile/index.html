{% extends 'base.html' %}

{% set page_title = '%s %s' % (member.first_name, member.last_name) %}

{% block content %}

{% set owner_css = {
  'public' : 'alert-success',
  'club' : 'alert-warning',
  'private' : 'alert-danger',
} %}
{% set role_css = {
  'athlete' : 'label-info',
  'trainer' : 'label-success',
  'staff' : 'label-danger',
} %}


<div class="container profile">

  {% if member == user %}
  <div class="alert {{ owner_css[user.privacy_profile] }}">
    <h4>Votre profil {{ levels[user.privacy_profile] }} </h4>
    {% if user.privacy_profile == 'private' %}
    Vous êtes le seul à pouvoir voir votre profil public.
    {% elif user.privacy_profile == 'club' %}
    Tous les membres de vos clubs peuvent voir votre profil public.
    {% else %}
    Tout le monde peut voir votre profil public.
    {% endif %}
  </div>
  {% endif %}

  {% if 'avatar' in privacy %}
  <img class="img-responsive img-thumbnail avatar pull-right" src="{{ member.avatar.url }}" alt="Avatar de {{ member.first_name }} {{ member.last_name }}"/>
  {% endif %}

  <h1>{{ member.first_name }} {{ member.last_name }}</h1>

  {% for m in member.memberships.exclude(role__in=('prospect', 'archive')) %}
  <h4>
    <span class="label {{ role_css[m.role] }}">{{ roles[m.role] }}</span> au {{ m.club.name }}
  </h4>
  {% endfor %}

  {% if 'races' in privacy %}
  {% include 'users/profile/races.html' %}
  {% endif %}

  {% if 'records' in privacy %}
  {% include 'users/profile/records.html' %}
  {% endif %}

  {% if 'stats' in privacy %}
  {% include 'users/profile/stats.html' %}
  {% endif %}
</div>

{% endblock %}
