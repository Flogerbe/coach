{% extends 'base.html' %}

{% set page_title = 'Mon profil' %}

{% block content %}

<div class="container">
	
	<h1>Mon profil</h1>
	
	<form class="form-horizontal" method="POST" action="">
	  {% csrf_token %}
	  <fieldset>
	    <legend>Informations personnelles</legend>
	    {{ macros.input(form.first_name, 'Prénom') }}
	    {{ macros.input(form.last_name, 'Nom') }}
	    {{ macros.input(form.email, 'Adresse email') }}
	    {{ macros.input(form.birthday, 'Date de naissance') }}
	    {% if user.category %}
	    <div class="form-group">
	      <label class="col-sm-4 control-label">Catégorie</label>
	      <div class="col-sm-8">
	        <span class="label label-info">{{user.category.name}}</span>
	      </div>
	    </div>
	    {% endif %}
	    {{ macros.input(form.license, 'License FFA') }}
	    <div class="alert alert-info">
	      <h4>Mot de passe</h4>
	      Vous pouvez changer de mot de passe en <a href="{% url user-password-update %}">utilisant cette page</a>.
	    </div>
	  </fieldset>

	  <fieldset>
	    <legend>Mails</legend>
	    <div class="form-group {% if form.errors %}has-error{% endif %}">
	      <label class="col-sm-4 control-label">Envoi automatique des commentaires en fin de semaine</label>
	      <div class="col-sm-8">
		    <label class="checkbox-inline">
				{{ form.auto_send|safe }}
		    </label>
	      </div>
	    </div>
	  </fieldset>

	  <fieldset>
	    <legend>Informations sportives</legend>

	    {{ form_trainers.management_form|safe }}
	    {% for form in form_trainers%}
	    <!-- <div class="form-group {% if form.errors %}has-error{% elif form.trainers.value() %}has-success{% endif %}"> -->
		<div class="form-group {% if form.errors %}has-error{% endif %}">
	      <label class="col-sm-4 control-label">Coach du {{ form.instance.club.name }}</label>
	      <div class="col-sm-8">
	        {{ form.id|safe }}
			{% for trainer in form.trainers %}
			    <label class="checkbox-inline">
					<input name="{{ form.trainers.html_name }}" type="checkbox" value="{{ trainer.choice_value }}" {% if trainer.is_checked() %}checked{% endif %}>
			        {{ trainer.choice_label }}
			    </label>
			{% endfor %}
	      </div>
	    </div>
	    {% if form.trainers.errors %}
	    <div class="alert alert-danger">{{form.trainers.errors|safe}}</div>
	    {% endif %}
	    {% endfor %}
		
		

	    {{ macros.input(form.nb_sessions, 'Nb Séances hebdomadaires') }}
	    {{ macros.input(form.vma, 'Vma', 'Ex: 15.2 km/h') }}
	    {{ macros.input(form.weight, 'Poids', 'En kg') }}
	    {{ macros.input(form.height, 'Taille', 'En cm') }}
	    {{ macros.input(form.frequency_rest, 'Fréquence Cardiaque au repos') }}
	    {{ macros.input(form.frequency, 'Fréquence Cardiaque maximale') }}
	    {{ macros.input(form.comment, 'Renseignements divers') }}
	  </fieldset>

	   <button type="submit" class="btn btn-primary">Mettre à jour</button>
	</form>
</div>



{% endblock %}
