{% import '_macros.html' as macros %}

{% if saved %}
<div class="alert alert-success">
  Séance enregistrée.
</div>
{% endif %}

{% with form.instance.plan_session as plan_session %}
{% include 'sport/_plan.html' %}
{% endwith %}

{% with form.non_field_errors() as err %}
{% if err %}
<div class="alert alert-danger">
  {{ err|safe }}
</div>
{% endif %}
{% endwith %}

{{ macros.session_types_name(form, session_types) }}
{{ macros.input(form.comment, 'Commentaire') }}
{{ macros.race_category(form) }}

<div class="form-group row">
  {% if modal %}
  <div class="col-xs-12">
  {% else %}
  <label class="control-label col-sm-2 hidden-xs">Sports</label>
  <div class="col-sm-10 col-xs-12">
  {% endif %}
  {% if form.session %}
    <div class="col-sm-2 hidden-xs" style="padding-left: 0">
      <span class="do-tooltip" data-toggle="tooltip" data-placement="top" title="Pour changer de sport, activer l'option Multi Sports dans votre profil.">
        {% with form.session.instance.sport as sport %}
          <i class="icon-sport-{{sport.slug}}"></i> {{sport.name}}
        {% endwith %}
      </span>
    </div>

    {{ macros.input_prepend(form.session.time, 'Temps') }}
    {{ macros.input_prepend(form.session.distance, 'Distance') }}
  {% else %}
    {% with form.instance.sessions.all() as sessions %}
    {% include 'sport/_sessions.html' %}
    {% endwith %}
  {% endif %}
  </div>
</div>
