{% import '_macros.html' as macros %}

{% if form.instance and form.instance.pk %}
<form id="session-{{day}}-{{form.instance.pk}}" method="post" action="{% url sport-session-edit day.year, day.month, day.day, form.instance.pk %}" class="form-horizontal report box">
{% else %}
<form id="session-{{day}}-add" method="post" action="{% url sport-session-add day.year, day.month, day.day %}" class="form-horizontal report box">
{% endif %}
  {% csrf_token %}

  {% if saved %}
  <div class="alert alert-success">
    Séance enregistrée.
  </div>
  {% endif %}

  {% with form.non_field_errors() as err %}
  {% if err %}
  <div class="alert alert-danger">
    {{ err|safe }}
  </div>
  {% endif %}
  {% endwith %}

  {{ macros.session_types_name(form, session_types) }}
  {{ macros.input(form.comment, 'Commentaire') }}
  {{ macros.race_category(form) }}

  <div class="form-group row">
    {% if modal %}
    <div class="col-xs-12">
    {% else %}
    <label class="control-label col-sm-2 hidden-xs">Sport</label>
    <div class="col-sm-10 col-xs-12">
    {% endif %}

      <div class="form-group sport-session row">
        {{ macros.sport_session(form) }}

        {{ macros.input_prepend(form.time, 'Temps') }}
        {{ macros.input_prepend(form.distance, 'Distance') }}

        <div class="col-sm-4 col-xs-12 actions">
          <button type="submit" class="pull-right btn btn-sm btn-primary" >Sauver {% if not modal %}la séance {% endif %}<i class="icon-right-open"></i></button>
          {% if form.instance.pk %}
          <a href="{% url sport-session-delete day.year, day.month, day.day, form.instance.pk %}" class="modal-action pull-right btn btn-sm btn-danger"><i class="icon-trash"></i>{% if not modal %}Supprimer{% endif %}</a>
          {% endif %}
        </div>
      </div>
    </div>
  </div>
</form>
