{% set type_css = {
  'training' : 'label-info',
  'race' : 'label-success',
  'rest' : 'label-danger',
} %}
{% set type_text = {
  'training' : 'Entraînement',
  'race' : 'Course',
  'rest' : 'Repos',
} %}

{% if day and day.sessions.count() %}
{% for session in day.sessions.order_by('created') %}
<div class="sport-session">
<div class="row hidden-xs">
  <div class="col-sm-8">
    <h4>
      <i class="icon-sport-{{session.sport.slug}} do-tooltip" title="{{ session.sport.name }}"></i>

      {% if session.has_garmin() %}
      <i class="icon-location do-tooltip" title="Données Garmin"></i>
      {% endif %}

      {% if not show_comments and (session.comments_public or session.comments_private) %}
      <i class="icon-comment"></i>
      {% endif %}

      <span class="text-muted">&bull;</span>
      <span class="label {{type_css[session.type]}}">{{type_text[session.type]}}</span>

      <span class="text-muted">&bull;</span>
      {% if session.name %}
      <strong>{{session.name}}</strong>
      {% else %}
      <i>Pas de nom</i>
      {% endif %}
    </h4>
  </div>

  <div class="col-sm-2">
    <h4>
    {% if session.time %}
      <span class="label {{type_css[session.type]}}">Temps</span>
      {{ session.time|total_time() }}
    {% else %}
      <span class="label label-warning">Pas de Temps</span>
    {% endif %}
    </h4>
  </div>

  <div class="col-sm-2">
    <h4>
    {% if session.distance %}
      <span class="label {{type_css[session.type]}}">Distance</span>
      {% if session.sport.get_category() == 'swimming' %}
        {{ (session.distance * 1000)|floatformat(0) }} m
      {% else %}
        {{ session.distance|floatformat(2) }} km
      {% endif %}
    {% else %}
      <span class="label label-warning">Pas de Distance</span>
    {% endif %}
    </h4>
  </div>

  {% if session.comment%}
  <div class="col-sm-12 comment">
    {{session.comment|linebreaksbr()}}
  </div>
  {% endif %}
</div>

<div class="row visible-xs">
  <div class="col-xs-5">
    <span class="type {{ session.type }}"></span>
    <i class="icon-sport-{{ session.sport.slug }}"></i>
    {% if session.name %}
    <strong>{{session.name}}</strong>
    {% else %}
    <i class="text-muted">Pas de nom</i>
    {% endif %}
  </div>
  <div class="col-xs-2">
    {% if session.time %}{{ session.time|total_time() }}{% else %}-{% endif %}
  </div>
  <div class="col-xs-3">
    {{ session.distance|default(0)|floatformat(2) }} km
  </div>
  {% if session.comment%}
  <div class="col-xs-12 comment">
    {{session.comment|linebreaksbr()}}
  </div>
  {% endif %}
</div>

{% if member and show_comments %}
<div class="row">
  {% include 'sport/session/_comments.html' %}
</div>
{% endif %}

</div> {# End of sport-session #}
{% endfor %}
{% elif not member %}
<p>
  <a href="{% url report-day day_date.year, day_date.month, day_date.day %}" class="btn btn-info btn-sm"><i class="icon-plus"></i> Ajouter une séance</a>
</p>
{% else %}
<p>
  <i class="text-muted">Pas de séances</i>
</p>
{% endif %}
